<!-- 

@Author: WKnight & Maomao
@DateTime: 2024-11-14 14:43
@Version: 1.1.0
@DESC(1.0.0): 完善基础流程信息，尽可能考虑完全了所有流程细节，具体分期实现待商榷
@DESC(1.1.0): 学生端页面赛事登记砍掉，完善赛事报销细节/队伍登记细节

-->


## 用户侧流程

---

### 学生端

#### 可见页面

- **首页**：展示
  - **导航栏**：首页、赛事登记(隐藏)、我的赛事、赛事报销
  - **通知大屏**：展示管理员推送的赛事信息(一报名灰度显示)  [个人赛事done]
  <!-- - 当前报名赛事进度条 -->
  
---


- **赛事登记**：
  - **赛事名称**：根据当前环境变量决定是否需要填充      [done]
  - **若为多人赛**：
    - 队伍名称 (敏感词汇限制)             
    - 多个输入组（默认第一个成员为队长）
  - **若为单人赛**：（展示单个输入组）                 [done]
    - 姓名：仅展示，不做录入和修改                     [done]
    - 学号：仅展示，不做录入和修改                     [done]
    - 专业：仅展示，不做录入和修改                     [done]
    - 班级：仅展示，不做录入和修改                     [done]
    - 指导老师：(不展示/不录入/后台分配)               [done]
    - 状态：选项录入(温馨提示,若先前往赛事组报名后才来报销可能会导致后续报销资格受影响)（0:意向参加、1:已缴费）（完整：2已提交作品、3已获奖、4已申请报销、5报销申请未通过、6已完成报销）            [待做]


---
团队赛事
 -个人赛事报名记录
 -团队赛事报名记录
表关联用户
  

- **我的赛事**：展示已报名的赛事列表                  [done]
  - **赛事查询**
  - **赛事查询结果**：赛事名、队伍名（若有）、队长（若单人赛则不展示）、指导老师、状态、报名时间、操作按钮、报销跳转  [done]
  - **结果内单条记录-操作按钮**：跳入修改 [done]
    - 修改进度 [done]
    - 获奖信息录入 [done]
    - 删除参赛记录（这个地方假删除，数据库不删，加标志位） [done]


---


- **赛事报销**：
  - 赛事名：选择已报名赛事（进度为“获奖”且未报销的参赛队伍单元才展示）
  - 姓名：仅展示，不做录入和修改
  - 学号：仅展示，不做录入和修改
  - 专业：仅展示，不做录入和修改
  - 班级：仅展示，不做录入和修改
  - 获奖信息：仅展示，不做录入和修改
  - 指导老师：仅展示，不做录入和修改
  - 收款码上传/企业微信API转款(考虑)/备注金额来源
  - 材料上传（发票PDF、获奖证书图片(根据管理员设置，不一定为必须项)）
  - 上传确定--若多人赛事，仅可队长发起报销流程


---

### 管理员端

#### 可见页面

- **首页**
  - **导航栏**：首页、赛事管理、跟踪器管理、参赛队伍管理、报销管理、通知管理、用户管理、系统设置
  - **系统概况展示**
    - 总赛事数、进行中赛事数、参赛队伍数、待审核报销数等关键指标
  <!-- - **近期重要节点提醒**
    - 显示即将到来的赛事关键节点（如报名截止、作品提交截止等） -->

---


- **赛事管理**
  - **赛事列表**
    - 查看所有已创建的赛事
    - 列表信息：赛事名称、举办方、参赛费用、当前状态、操作按钮   [done]
    - **操作按钮**：查看详情、修改赛事、删除赛事                [done-查看详情未做]
  - **创建新赛事**
    - **基础信息录入**
      - 赛事名称                                              [done]
      - 举办方                                                [done]
      - 参赛费用(前端条件渲染)                                 [done]
      - 赛事描述                                              [待做]
      - 队伍成员数上限                                        [待做]
      - 是否允许多队伍报名/队长唯一性                          [待做]
    - **关键节点配置**
      - 动态添加关键节点（可添加多个）
        - 节点名称（如：报名开始、报名截止、作品提交开始、作品提交截止、结果公布等）
        - 节点日期和时间
    - **保存并发布**
  - **修改赛事**
    - 修改赛事的基础信息和关键节点
  - **删除赛事**
    - 删除选定的赛事（假删除/需二次确认）

---

- **跟踪器管理**
  - **跟踪器列表**
    - 查看所有已创建的跟踪器
    - 列表信息：跟踪器名称、适用赛事、创建时间、操作按钮
    - **操作按钮**：查看详情、修改跟踪器、删除跟踪器、切换跟踪赛事
  - **创建新跟踪器**
    - **基本信息**
      - 跟踪器名称
      - 适用赛事（可选择一个或多个赛事）
    - **跟踪策略配置**
      - 定义需要跟踪的队伍进程节点
      - 设置自动提醒或通知的规则（如在关键节点前发送提醒）
    - **保存跟踪器**
  - **修改跟踪器**
    - 修改跟踪器的名称、适用赛事和跟踪策略
  - **切换跟踪器**
    - 选择当前使用的跟踪器，以实现不同时间快速切换跟踪策略

---

- **参赛队伍管理**
  - **队伍列表**
    - 查看所有参赛队伍的信息
    - 支持按赛事、状态、队伍名称、队长等条件查询
    - 列表信息：赛事名称、队伍名称、队长姓名、当前状态、报名时间、操作按钮
    - **操作按钮**：查看详情、更新状态、删除队伍
  - **队伍详情**
    - 显示队伍的详细信息，包括成员列表、指导老师、参赛进度等
    - **更新队伍状态**
      - 手动调整队伍的参赛状态（如已缴费、已提交作品、已获奖等）
    - **跟踪进度**
      - 查看队伍的进度跟踪记录
      - 添加备注或反馈
  - **队伍导入** 
    - 教师可以导入excel表, 定向分配角色
  管理端创建赛事的时候,需要这个比赛可供报名的队员人数
  团队赛事:当我点击团队赛事会出现一个界面,这个界面的界面是团队赛事的报名界面
  字段是赛事的信息,然后填写队伍名字,队长信息,成员信息[队长+成员的个数=队员的人数]
  这个字段的信息会被保存在一个表中,这个表只是显示队长的名称,当他点击查看详情可以查看队员的信息,也可以进行修改队员的信息
  然后用户端(队长和队员)会显示上述表的信息(只是队长以及赛事的关键信息)。
  对于管理端则可以显示所有的队伍的信息。也可进行修改
  1. 对于创建团队赛事的表，在原来的单人赛事的基础上加上字段（该比赛的人数n）
  2. 对于首页，顶部右侧加入局内跳转至团队比赛（根据人数字段进行判断），然后需要加入字段队长，队员1，队员2，队员n。
---

- **报销管理**
  - **报销申请列表**
    - 查看所有报销申请，支持按赛事、队伍、状态等条件查询
    - 列表信息：申请人姓名（队长姓名）、赛事名称、申请时间、获奖信息、当前状态、操作按钮
    - **操作按钮**：审核申请、查看详情（详情页面包括 下载附件 按钮）
  - **审核报销申请**
    - 查看申请的详细信息，包括上传的材料、学生专业情况
    - **审核操作**
      - **批准报销**
        - 确认报销金额/占比，更新申请状态为“已报销”
        - 系统记录审批人和审批时间
      - **退回报销**
        - 需要填写退回原因
        - 更新申请状态为“报销申请未通过”
    - **反馈通知**
      - 系统自动通知申请人审核结果（调用邮件）
  - **报销记录**
    - 查询已审核的报销申请，支持导出报表（留接口）

<!-- ---

- **通知管理**
  - **通知列表**
    - 查看所有已发布的通知
    - 列表信息：通知标题、发布时间、适用对象、操作按钮
    - **操作按钮**：查看、编辑、删除
  - **发布新通知**
    - **通知内容**
      - 标题
      - 正文（支持富文本编辑）
    - **适用对象**
      - 全体用户、特定赛事的参赛队伍、特定状态的队伍等
    - **发布时间**
      - 立即发布或定时发布
    - **保存并发布**
  - **编辑通知**
    - 修改已发布的通知内容和适用对象
  - **删除通知**
    - 删除选定的通知（需二次确认） -->

---

- **用户管理**
  - **学生用户列表**
    - 查看所有注册的学生用户          [done]
    - 列表信息：姓名、学号、专业、班级、注册时间、账号状态、操作按钮  [done]
    - **操作按钮**：查看详情、重置密码、禁用/启用账号               [done-封禁账号未做]
  - **用户详情**
    - 显示用户的个人信息和参赛记录
  - **权限管理**
    - 分配或调整用户的权限（如是否具有管理员权限）
  - **用户导入**
    - 上传Excel表格，一键导入用户信息
  

---

- **系统设置**
  - **基本设置**
    - 系统名称、Logo等
  - **权限管理**
    - 定义不同角色的权限范围
  - **数据备份与恢复**
    - 手动或定时备份系统数据
    - 数据恢复功能（需严格权限控制）
  - **日志管理**
    - 查看系统操作日志，支持按时间、用户、操作类型查询
  - **邮件与短信配置**
    - 设置系统通知的邮件服务器和短信服务接口

---

### 功能流程说明

1. **赛事创建与配置**
   - 管理员进入“赛事管理”页面，点击“创建新赛事”
   - 录入赛事的基本信息，包括名称、举办方、参赛费用等
   - 在“关键节点配置”中，管理员可动态添加多个节点，输入节点名称和对应的日期时间
   - 保存后，赛事即创建成功，系统可根据关键节点自动触发相关通知或状态更新

2. **跟踪器的使用**
   - 管理员进入“跟踪器管理”页面，创建新的跟踪器
   - 配置跟踪策略，如跟踪哪些队伍的哪些进度节点，设置自动提醒规则等
   - 保存并启用跟踪器，系统将按照配置对参赛队伍的进度进行跟踪
   - 管理员可随时切换不同的跟踪器，以适应不同阶段的管理需求

3. **参赛队伍的管理**
   - 在“参赛队伍管理”中，管理员可查看所有队伍的信息和进度
   - 可手动更新队伍的状态，添加备注，帮助队伍解决问题
   - 利用跟踪器，管理员可及时了解队伍的进展，发现滞后的队伍并给予提醒

4. **报销申请的审核**
   - 管理员在“报销管理”页面查看待审核的报销申请
   - 进入审核页面，查看申请的详细信息和上传的材料
   - 根据情况选择“批准”或“拒绝”，并填写必要的备注或拒绝原因
   - 系统将自动通知申请人审核结果，并更新申请的状态

5. **通知的发布**
   - 管理员可在“通知管理”中发布新的通知，编辑或删除已有通知
   - 通知可针对全体用户或特定的参赛队伍，支持定时发布
   - 通知发布后，学生端的通知大屏将展示最新的通知信息

6. **用户与系统管理**
   - 在“用户管理”中，管理员可管理学生用户的信息和账号状态
   - 可重置用户密码，禁用或启用账号
   - 在“系统设置”中，管理员可配置系统的基本设置、权限、数据备份等

---

### 系统特点

- **动态配置**
  - 关键节点和跟踪器均可由管理员动态添加和修改，具有高度的灵活性
- **自动化管理**
  - 系统可根据设定的关键节点和跟踪策略，自动发送通知和提醒，降低管理员的工作量
- **进度跟踪**
  - 通过跟踪器，管理员可实时掌握参赛队伍的进度，及时发现问题并干预
- **灵活的报销审核**
  - 管理员可在系统中直接审核报销申请，支持批准和拒绝，并提供反馈
- **全面的权限控制**
  - 系统支持多级权限设置，保障数据安全和管理的规范性
- **用户友好**
  - 界面简洁明了，操作方便，提升了管理员的工作效率

---

### 注意事项

- **数据安全**
  - 需确保学生上传的个人信息和敏感资料的安全，遵守相关的法律法规
- **日志记录**
  - 系统应详细记录管理员的操作日志，便于追溯和审计
- **异常处理**
  - 在关键节点的自动任务中，应考虑异常情况的处理，确保系统稳定运行
- **培训与支持**
  - 为管理员提供系统使用手册和培训，确保其能够熟练操作系统

